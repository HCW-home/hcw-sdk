{"version":3,"file":"hug-angular-lib.umd.js","sources":["../../../node_modules/tslib/tslib.es6.js","ng://hug-angular-lib/lib/room2.service.ts","ng://hug-angular-lib/lib/hug-angular-lib.service.ts","ng://hug-angular-lib/lib/hug-angular-lib.component.ts","ng://hug-angular-lib/lib/log.service.ts","ng://hug-angular-lib/lib/hug-angular-lib.module.ts","ng://hug-angular-lib/lib/room.service.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { Injectable } from '@angular/core';\n\n@Injectable()\nexport class Room2Service {\n  room = 2\n  constructor() { }\n}\n","import { Room2Service } from './room2.service';\nimport { Injectable } from '@angular/core';\n\n@Injectable()\nexport class HugAngularLibService {\n\n  public random:number\n  public random2:number\n  constructor(private room2: Room2Service) {\n    this.random = Math.random()\n  }\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'lib-hug-angular-lib',\n  template: `\n    <p>\n      hug-fuck shit address\n    </p>\n  `,\n  styles: []\n})\nexport class HugAngularLibComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n\n  }\n\n}\n","// import { Injectable } from '@angular/core';\nexport { NGXLogger as LogService } from 'ngx-logger';\n\n// @Injectable({\n//   providedIn: 'root'\n// })\n// export class LogService extends NGXLogger {\n\n//   constructor() {\n//     super()\n//   }\n// }\n","import { LogService } from './log.service';\nimport { NgModule } from '@angular/core';\nimport { HugAngularLibComponent } from './hug-angular-lib.component';\nimport { LoggerModule, NgxLoggerLevel } from 'ngx-logger';\n\nconsole.log('NGX logger')\n@NgModule({\n  declarations: [HugAngularLibComponent],\n  imports: [\n    LoggerModule.forRoot({serverLoggingUrl: '/api/logs', level: NgxLoggerLevel.DEBUG, serverLogLevel: NgxLoggerLevel.ERROR})\n  ],\n  providers:[LogService],\n  exports: [HugAngularLibComponent]\n})\nexport class HugAngularLibModule { }\n","import { Room2Service } from './room2.service';\nimport { Injectable } from '@angular/core';\n\n\n\n\nlet saveAs;\n\nlet mediasoupClient;\n\n\nlet requestTimeout,\n\tlastN,\n\tmobileLastN,\n\tvideoAspectRatio;\n\n\n\t// {\n\t// \trequestTimeout = 20000,\n\t// \tlastN = 4,\n\t// \tmobileLastN = 1,\n\t// \tvideoAspectRatio = 1.777 // 16 : 9\n\t// }\n\n\n\nconst VIDEO_CONSTRAINS =\n{\n\t'low' :\n\t{\n\t\twidth       : { ideal: 320 },\n\t\taspectRatio : videoAspectRatio\n\t},\n\t'medium' :\n\t{\n\t\twidth       : { ideal: 640 },\n\t\taspectRatio : videoAspectRatio\n\t},\n\t'high' :\n\t{\n\t\twidth       : { ideal: 1280 },\n\t\taspectRatio : videoAspectRatio\n\t},\n\t'veryhigh' :\n\t{\n\t\twidth       : { ideal: 1920 },\n\t\taspectRatio : videoAspectRatio\n\t},\n\t'ultra' :\n\t{\n\t\twidth       : { ideal: 3840 },\n\t\taspectRatio : videoAspectRatio\n\t}\n};\n\nconst PC_PROPRIETARY_CONSTRAINTS =\n{\n\toptional : [ { googDscp: true } ]\n};\n\nconst VIDEO_SIMULCAST_ENCODINGS =\n[\n\t{ scaleResolutionDownBy: 4, maxBitRate: 100000 },\n\t{ scaleResolutionDownBy: 1, maxBitRate: 1200000 }\n];\n\n// Used for VP9 webcam video.\nconst VIDEO_KSVC_ENCODINGS =\n[\n\t{ scalabilityMode: 'S3T3_KEY' }\n];\n\n// Used for VP9 desktop sharing.\nconst VIDEO_SVC_ENCODINGS =\n[\n\t{ scalabilityMode: 'S3T3', dtx: true }\n];\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport  class RoomService {\n\n\n\n  // Transport for sending.\n  _sendTransport = null;\n  // Transport for receiving.\n  _recvTransport = null;\n\n  _closed = false;\n\n  _produce = true;\n\n  _forceTcp = false;\n\n  _muted\n  _device\n  _peerId\n  _soundAlert\n  _roomId\n  _mediasoupDevice\n\n  _micProducer\n  _hark\n  _harkStream\n  _webcamProducer\n  _extraVideoProducers\n  _webcams\n  _audioDevices\n  _audioOutputDevices\n  _consumers\n\n\n  constructor() {\n\n\n  }\n\n  init({\n    peerId=null,\n    device= null,\n    produce=true,\n    forceTcp=false,\n    muted=true\n  } = {}) {\n    if (!peerId)\n      throw new Error('Missing peerId');\n    else if (!device)\n      throw new Error('Missing device');\n\n    // logger.debug(\n    //   'constructor() [peerId: \"%s\", device: \"%s\", produce: \"%s\", forceTcp: \"%s\", displayName \"\"]',\n    //   peerId, device.flag, produce, forceTcp);\n\n\n\n\n    // Whether we should produce.\n    this._produce = produce;\n\n    // Whether we force TCP\n    this._forceTcp = forceTcp;\n\n\n\n\n    // Whether simulcast should be used.\n    // this._useSimulcast = false;\n\n    // if ('simulcast' in window.config)\n    //   this._useSimulcast = window.config.simulcast;\n\n\n\n\n\n    this._muted = muted;\n\n    // This device\n    this._device = device;\n\n    // My peer name.\n    this._peerId = peerId;\n\n\n\n    // Alert sound\n    this._soundAlert = new Audio('/sounds/notify.mp3');\n\n\n\n\n    // The room ID\n    this._roomId = null;\n\n    // mediasoup-client Device instance.\n    // @type {mediasoupClient.Device}\n    this._mediasoupDevice = null;\n\n\n    // Transport for sending.\n    this._sendTransport = null;\n\n    // Transport for receiving.\n    this._recvTransport = null;\n\n    // Local mic mediasoup Producer.\n    this._micProducer = null;\n\n    // Local mic hark\n    this._hark = null;\n\n    // Local MediaStream for hark\n    this._harkStream = null;\n\n    // Local webcam mediasoup Producer.\n    this._webcamProducer = null;\n\n    // Extra videos being produced\n    this._extraVideoProducers = new Map();\n\n    // Map of webcam MediaDeviceInfos indexed by deviceId.\n    // @type {Map<String, MediaDeviceInfos>}\n    this._webcams = {};\n\n    this._audioDevices = {};\n\n    this._audioOutputDevices = {};\n\n    // mediasoup Consumers.\n    // @type {Map<String, mediasoupClient.Consumer>}\n    this._consumers = new Map();\n\n\n    // this._startKeyListener();\n\n    // this._startDevicesListener();\n\n  }\n  // close() {\n  //   if (this._closed)\n  //     return;\n\n  //   this._closed = true;\n\n  //   logger.debug('close()');\n\n  //   this._signalingSocket.close();\n\n  //   // Close mediasoup Transports.\n  //   if (this._sendTransport)\n  //     this._sendTransport.close();\n\n  //   if (this._recvTransport)\n  //     this._recvTransport.close();\n\n  //   store.dispatch(roomActions.setRoomState('closed'));\n\n  //   window.location = `/${this._roomId}`;\n  // }\n\n  // _startKeyListener() {\n  //   // Add keydown event listener on document\n  //   document.addEventListener('keydown', (event) => {\n  //     if (event.repeat) return;\n  //     const key = String.fromCharCode(event.which);\n\n  //     const source = event.target;\n\n  //     const exclude = ['input', 'textarea'];\n\n  //     if (exclude.indexOf(source.tagName.toLowerCase()) === -1) {\n  //       logger.debug('keyDown() [key:\"%s\"]', key);\n\n  //       switch (key) {\n\n  //         /*\n  //         case String.fromCharCode(37):\n  //         {\n  //           const newPeerId = this._spotlights.getPrevAsSelected(\n  //             store.getState().room.selectedPeerId);\n\n  //           if (newPeerId) this.setSelectedPeer(newPeerId);\n  //           break;\n  //         }\n\n  //         case String.fromCharCode(39):\n  //         {\n  //           const newPeerId = this._spotlights.getNextAsSelected(\n  //             store.getState().room.selectedPeerId);\n\n  //           if (newPeerId) this.setSelectedPeer(newPeerId);\n  //           break;\n  //         }\n  //         */\n\n\n  //         case 'M': // Toggle microphone\n  //           {\n  //             if (this._micProducer) {\n  //               if (!this._micProducer.paused) {\n  //                 this.muteMic();\n\n  //                 store.dispatch(requestActions.notify(\n  //                   {\n  //                     text: intl.formatMessage({\n  //                       id: 'devices.microphoneMute',\n  //                       defaultMessage: 'Muted your microphone'\n  //                     })\n  //                   }));\n  //               }\n  //               else {\n  //                 this.unmuteMic();\n\n  //                 store.dispatch(requestActions.notify(\n  //                   {\n  //                     text: intl.formatMessage({\n  //                       id: 'devices.microphoneUnMute',\n  //                       defaultMessage: 'Unmuted your microphone'\n  //                     })\n  //                   }));\n  //               }\n  //             }\n  //             else {\n  //               this.updateMic({ start: true });\n\n  //               store.dispatch(requestActions.notify(\n  //                 {\n  //                   text: intl.formatMessage({\n  //                     id: 'devices.microphoneEnable',\n  //                     defaultMessage: 'Enabled your microphone'\n  //                   })\n  //                 }));\n  //             }\n\n  //             break;\n  //           }\n\n  //         case 'V': // Toggle video\n  //           {\n  //             if (this._webcamProducer)\n  //               this.disableWebcam();\n  //             else\n  //               this.updateWebcam({ start: true });\n\n  //             break;\n  //           }\n\n  //         case 'H': // Open help dialog\n  //           {\n  //             store.dispatch(roomActions.setHelpOpen(true));\n\n  //             break;\n  //           }\n\n  //         default:\n  //           {\n  //             break;\n  //           }\n  //       }\n  //     }\n  //   });\n\n\n  // }\n\n  // _startDevicesListener() {\n  //   navigator.mediaDevices.addEventListener('devicechange', async () => {\n  //     logger.debug('_startDevicesListener() | navigator.mediaDevices.ondevicechange');\n\n  //     await this._updateAudioDevices();\n  //     await this._updateWebcams();\n  //     await this._updateAudioOutputDevices();\n\n  //     store.dispatch(requestActions.notify(\n  //       {\n  //         text: intl.formatMessage({\n  //           id: 'devices.devicesChanged',\n  //           defaultMessage: 'Your devices changed, configure your devices in the settings dialog'\n  //         })\n  //       }));\n  //   });\n  // }\n\n\n  // _soundNotification() {\n  //   const { notificationSounds } = store.getState().settings;\n\n  //   if (notificationSounds) {\n  //     const alertPromise = this._soundAlert.play();\n\n  //     if (alertPromise !== undefined) {\n  //       alertPromise\n  //         .then()\n  //         .catch((error) => {\n  //           logger.error('_soundAlert.play() [error:\"%o\"]', error);\n  //         });\n  //     }\n  //   }\n  // }\n\n  // timeoutCallback(callback) {\n  //   let called = false;\n\n  //   const interval = setTimeout(\n  //     () => {\n  //       if (called)\n  //         return;\n  //       called = true;\n  //       callback(new SocketTimeoutError('Request timed out'));\n  //     },\n  //     requestTimeout\n  //   );\n\n  //   return (...args) => {\n  //     if (called)\n  //       return;\n  //     called = true;\n  //     clearTimeout(interval);\n\n  //     callback(...args);\n  //   };\n  // }\n\n  // _sendRequest(method, data) {\n  //   return new Promise((resolve, reject) => {\n  //     if (!this._signalingSocket) {\n  //       reject('No socket connection');\n  //     }\n  //     else {\n  //       this._signalingSocket.emit(\n  //         'request',\n  //         { method, data },\n  //         this.timeoutCallback((err, response) => {\n  //           if (err)\n  //             reject(err);\n  //           else\n  //             resolve(response);\n  //         })\n  //       );\n  //     }\n  //   });\n  // }\n\n  // async getTransportStats() {\n  //   try {\n  //     if (this._recvTransport) {\n  //       logger.debug('getTransportStats() - recv [transportId: \"%s\"]', this._recvTransport.id);\n\n  //       const recv = await this.sendRequest('getTransportStats', { transportId: this._recvTransport.id });\n\n  //       store.dispatch(\n  //         transportActions.addTransportStats(recv, 'recv'));\n  //     }\n\n  //     if (this._sendTransport) {\n  //       logger.debug('getTransportStats() - send [transportId: \"%s\"]', this._sendTransport.id);\n\n  //       const send = await this.sendRequest('getTransportStats', { transportId: this._sendTransport.id });\n\n  //       store.dispatch(\n  //         transportActions.addTransportStats(send, 'send'));\n  //     }\n  //   }\n  //   catch (error) {\n  //     logger.error('getTransportStats() [error:\"%o\"]', error);\n  //   }\n  // }\n\n  // async sendRequest(method, data) {\n  //   logger.debug('sendRequest() [method:\"%s\", data:\"%o\"]', method, data);\n\n  //   const {\n  //     requestRetries = 3\n  //   } = window.config;\n\n  //   for (let tries = 0; tries < requestRetries; tries++) {\n  //     try {\n  //       return await this._sendRequest(method, data);\n  //     }\n  //     catch (error) {\n  //       if (\n  //         error instanceof SocketTimeoutError &&\n  //         tries < requestRetries\n  //       )\n  //         logger.warn('sendRequest() | timeout, retrying [attempt:\"%s\"]', tries);\n  //       else\n  //         throw error;\n  //     }\n  //   }\n  // }\n\n\n\n\n  // async muteMic() {\n  //   logger.debug('muteMic()');\n\n  //   this._micProducer.pause();\n\n  //   try {\n  //     await this.sendRequest(\n  //       'pauseProducer', { producerId: this._micProducer.id });\n\n  //     store.dispatch(\n  //       producerActions.setProducerPaused(this._micProducer.id));\n\n  //     store.dispatch(\n  //       settingsActions.setAudioMuted(true));\n\n  //   }\n  //   catch (error) {\n  //     logger.error('muteMic() [error:\"%o\"]', error);\n\n  //     store.dispatch(requestActions.notify(\n  //       {\n  //         type: 'error',\n  //         text: intl.formatMessage({\n  //           id: 'devices.microphoneMuteError',\n  //           defaultMessage: 'Unable to mute your microphone'\n  //         })\n  //       }));\n  //   }\n  // }\n\n  // async unmuteMic() {\n  //   logger.debug('unmuteMic()');\n\n  //   if (!this._micProducer) {\n  //     this.updateMic({ start: true });\n  //   }\n  //   else {\n  //     this._micProducer.resume();\n\n  //     try {\n  //       await this.sendRequest(\n  //         'resumeProducer', { producerId: this._micProducer.id });\n\n  //       store.dispatch(\n  //         producerActions.setProducerResumed(this._micProducer.id));\n\n  //       store.dispatch(\n  //         settingsActions.setAudioMuted(false));\n\n  //     }\n  //     catch (error) {\n  //       logger.error('unmuteMic() [error:\"%o\"]', error);\n\n  //       store.dispatch(requestActions.notify(\n  //         {\n  //           type: 'error',\n  //           text: intl.formatMessage({\n  //             id: 'devices.microphoneUnMuteError',\n  //             defaultMessage: 'Unable to unmute your microphone'\n  //           })\n  //         }));\n  //     }\n  //   }\n  // }\n\n\n  // disconnectLocalHark() {\n  //   logger.debug('disconnectLocalHark()');\n\n  //   if (this._harkStream != null) {\n  //     let [track] = this._harkStream.getAudioTracks();\n\n  //     track.stop();\n  //     track = null;\n\n  //     this._harkStream = null;\n  //   }\n\n  //   if (this._hark != null)\n  //     this._hark.stop();\n  // }\n\n  // connectLocalHark(track) {\n  //   logger.debug('connectLocalHark() [track:\"%o\"]', track);\n\n  //   this._harkStream = new MediaStream();\n\n  //   const newTrack = track.clone();\n\n  //   this._harkStream.addTrack(newTrack);\n\n  //   newTrack.enabled = true;\n\n  //   this._hark = hark(this._harkStream,\n  //     {\n  //       play: false,\n  //       interval: 10,\n  //       threshold: store.getState().settings.noiseThreshold,\n  //       history: 100\n  //     });\n\n  //   this._hark.lastVolume = -100;\n\n  //   this._hark.on('volume_change', (volume) => {\n  //     // Update only if there is a bigger diff\n  //     if (this._micProducer && Math.abs(volume - this._hark.lastVolume) > 0.5) {\n  //       // Decay calculation: keep in mind that volume range is -100 ... 0 (dB)\n  //       // This makes decay volume fast if difference to last saved value is big\n  //       // and slow for small changes. This prevents flickering volume indicator\n  //       // at low levels\n  //       if (volume < this._hark.lastVolume) {\n  //         volume =\n  //           this._hark.lastVolume -\n  //           Math.pow(\n  //             (volume - this._hark.lastVolume) /\n  //             (100 + this._hark.lastVolume)\n  //             , 2\n  //           ) * 10;\n  //       }\n\n  //       this._hark.lastVolume = volume;\n\n  //       store.dispatch(peerVolumeActions.setPeerVolume(this._peerId, volume));\n  //     }\n  //   });\n\n  //   this._hark.on('speaking', () => {\n  //     store.dispatch(meActions.setIsSpeaking(true));\n\n  //     if (\n  //       (store.getState().settings.voiceActivatedUnmute ||\n  //         store.getState().me.isAutoMuted) &&\n  //       this._micProducer &&\n  //       this._micProducer.paused\n  //     )\n  //       this._micProducer.resume();\n\n  //     store.dispatch(meActions.setAutoMuted(false)); // sanity action\n  //   });\n\n  //   this._hark.on('stopped_speaking', () => {\n  //     store.dispatch(meActions.setIsSpeaking(false));\n\n  //     if (\n  //       store.getState().settings.voiceActivatedUnmute &&\n  //       this._micProducer &&\n  //       !this._micProducer.paused\n  //     ) {\n  //       this._micProducer.pause();\n\n  //       store.dispatch(meActions.setAutoMuted(true));\n  //     }\n  //   });\n  // }\n\n  // async changeAudioOutputDevice(deviceId) {\n  //   logger.debug('changeAudioOutputDevice() [deviceId:\"%s\"]', deviceId);\n\n  //   store.dispatch(\n  //     meActions.setAudioOutputInProgress(true));\n\n  //   try {\n  //     const device = this._audioOutputDevices[deviceId];\n\n  //     if (!device)\n  //       throw new Error('Selected audio output device no longer available');\n\n  //     store.dispatch(settingsActions.setSelectedAudioOutputDevice(deviceId));\n\n  //     await this._updateAudioOutputDevices();\n  //   }\n  //   catch (error) {\n  //     logger.error('changeAudioOutputDevice() [error:\"%o\"]', error);\n  //   }\n\n  //   store.dispatch(\n  //     meActions.setAudioOutputInProgress(false));\n  // }\n\n  // // Only Firefox supports applyConstraints to audio tracks\n  // // See:\n  // // https://bugs.chromium.org/p/chromium/issues/detail?id=796964\n  // async updateMic({\n  //   start = false,\n  //   restart = false || this._device.flag !== 'firefox',\n  //   newDeviceId = null\n  // } = {}) {\n  //   logger.debug(\n  //     'updateMic() [start:\"%s\", restart:\"%s\", newDeviceId:\"%s\"]',\n  //     start,\n  //     restart,\n  //     newDeviceId\n  //   );\n\n  //   let track;\n\n  //   try {\n  //     if (!this._mediasoupDevice.canProduce('audio'))\n  //       throw new Error('cannot produce audio');\n\n  //     if (newDeviceId && !restart)\n  //       throw new Error('changing device requires restart');\n\n  //     if (newDeviceId)\n  //       store.dispatch(settingsActions.setSelectedAudioDevice(newDeviceId));\n\n  //     store.dispatch(meActions.setAudioInProgress(true));\n\n  //     const deviceId = await this._getAudioDeviceId();\n  //     const device = this._audioDevices[deviceId];\n\n  //     if (!device)\n  //       throw new Error('no audio devices');\n\n  //     const {\n  //       autoGainControl,\n  //       echoCancellation,\n  //       noiseSuppression\n  //     } = store.getState().settings;\n\n  //     if (!window.config.centralAudioOptions) {\n  //       throw new Error(\n  //         'Missing centralAudioOptions from app config! (See it in example config.)'\n  //       );\n  //     }\n\n  //     const {\n  //       sampleRate = 96000,\n  //       channelCount = 1,\n  //       volume = 1.0,\n  //       sampleSize = 16,\n  //       opusStereo = false,\n  //       opusDtx = true,\n  //       opusFec = true,\n  //       opusPtime = 20,\n  //       opusMaxPlaybackRate = 96000\n  //     } = window.config.centralAudioOptions;\n\n  //     if (\n  //       (restart && this._micProducer) ||\n  //       start\n  //     ) {\n  //       this.disconnectLocalHark();\n\n  //       if (this._micProducer)\n  //         await this.disableMic();\n\n  //       const stream = await navigator.mediaDevices.getUserMedia(\n  //         {\n  //           audio: {\n  //             deviceId: { ideal: deviceId },\n  //             sampleRate,\n  //             channelCount,\n  //             volume,\n  //             autoGainControl,\n  //             echoCancellation,\n  //             noiseSuppression,\n  //             sampleSize\n  //           }\n  //         }\n  //       );\n\n  //       ([track] = stream.getAudioTracks());\n\n  //       const { deviceId: trackDeviceId } = track.getSettings();\n\n  //       store.dispatch(settingsActions.setSelectedAudioDevice(trackDeviceId));\n\n  //       this._micProducer = await this._sendTransport.produce(\n  //         {\n  //           track,\n  //           codecOptions:\n  //           {\n  //             opusStereo,\n  //             opusDtx,\n  //             opusFec,\n  //             opusPtime,\n  //             opusMaxPlaybackRate\n  //           },\n  //           appData:\n  //             { source: 'mic' }\n  //         });\n\n  //       store.dispatch(producerActions.addProducer(\n  //         {\n  //           id: this._micProducer.id,\n  //           source: 'mic',\n  //           paused: this._micProducer.paused,\n  //           track: this._micProducer.track,\n  //           rtpParameters: this._micProducer.rtpParameters,\n  //           codec: this._micProducer.rtpParameters.codecs[0].mimeType.split('/')[1]\n  //         }));\n\n  //       this._micProducer.on('transportclose', () => {\n  //         this._micProducer = null;\n  //       });\n\n  //       this._micProducer.on('trackended', () => {\n  //         store.dispatch(requestActions.notify(\n  //           {\n  //             type: 'error',\n  //             text: intl.formatMessage({\n  //               id: 'devices.microphoneDisconnected',\n  //               defaultMessage: 'Microphone disconnected'\n  //             })\n  //           }));\n\n  //         this.disableMic();\n  //       });\n\n  //       this._micProducer.volume = 0;\n\n  //       this.connectLocalHark(track);\n  //     }\n  //     else if (this._micProducer) {\n  //       ({ track } = this._micProducer);\n\n  //       await track.applyConstraints(\n  //         {\n  //           sampleRate,\n  //           channelCount,\n  //           volume,\n  //           autoGainControl,\n  //           echoCancellation,\n  //           noiseSuppression,\n  //           sampleSize\n  //         }\n  //       );\n\n  //       if (this._harkStream != null) {\n  //         const [harkTrack] = this._harkStream.getAudioTracks();\n\n  //         harkTrack && await harkTrack.applyConstraints(\n  //           {\n  //             sampleRate,\n  //             channelCount,\n  //             volume,\n  //             autoGainControl,\n  //             echoCancellation,\n  //             noiseSuppression,\n  //             sampleSize\n  //           }\n  //         );\n  //       }\n  //     }\n\n  //     await this._updateAudioDevices();\n  //   }\n  //   catch (error) {\n  //     logger.error('updateMic() [error:\"%o\"]', error);\n\n  //     store.dispatch(requestActions.notify(\n  //       {\n  //         type: 'error',\n  //         text: intl.formatMessage({\n  //           id: 'devices.microphoneError',\n  //           defaultMessage: 'An error occurred while accessing your microphone'\n  //         })\n  //       }));\n\n  //     if (track)\n  //       track.stop();\n  //   }\n\n  //   store.dispatch(meActions.setAudioInProgress(false));\n  // }\n\n  // async updateWebcam({\n  //   init = false,\n  //   start = false,\n  //   restart = false,\n  //   newDeviceId = null,\n  //   newResolution = null,\n  //   newFrameRate = null\n  // } = {}) {\n  //   logger.debug(\n  //     'updateWebcam() [start:\"%s\", restart:\"%s\", newDeviceId:\"%s\", newResolution:\"%s\", newFrameRate:\"%s\"]',\n  //     start,\n  //     restart,\n  //     newDeviceId,\n  //     newResolution,\n  //     newFrameRate\n  //   );\n\n  //   let track;\n\n  //   try {\n  //     if (!this._mediasoupDevice.canProduce('video'))\n  //       throw new Error('cannot produce video');\n\n  //     if (newDeviceId && !restart)\n  //       throw new Error('changing device requires restart');\n\n  //     if (newDeviceId)\n  //       store.dispatch(settingsActions.setSelectedWebcamDevice(newDeviceId));\n\n  //     if (newResolution)\n  //       store.dispatch(settingsActions.setVideoResolution(newResolution));\n\n  //     if (newFrameRate)\n  //       store.dispatch(settingsActions.setVideoFrameRate(newFrameRate));\n\n  //     const { videoMuted } = store.getState().settings;\n\n  //     if (init && videoMuted)\n  //       return;\n  //     else\n  //       store.dispatch(settingsActions.setVideoMuted(false));\n\n  //     store.dispatch(meActions.setWebcamInProgress(true));\n\n  //     const deviceId = await this._getWebcamDeviceId();\n  //     const device = this._webcams[deviceId];\n\n  //     if (!device)\n  //       throw new Error('no webcam devices');\n\n  //     const {\n  //       resolution,\n  //       frameRate\n  //     } = store.getState().settings;\n\n  //     if (\n  //       (restart && this._webcamProducer) ||\n  //       start\n  //     ) {\n  //       if (this._webcamProducer)\n  //         await this.disableWebcam();\n\n  //       const stream = await navigator.mediaDevices.getUserMedia(\n  //         {\n  //           video:\n  //           {\n  //             deviceId: { ideal: deviceId },\n  //             ...VIDEO_CONSTRAINS[resolution],\n  //             frameRate\n  //           }\n  //         });\n\n  //       ([track] = stream.getVideoTracks());\n\n  //       const { deviceId: trackDeviceId } = track.getSettings();\n\n  //       store.dispatch(settingsActions.setSelectedWebcamDevice(trackDeviceId));\n\n  //       if (this._useSimulcast) {\n  //         // If VP9 is the only available video codec then use SVC.\n  //         const firstVideoCodec = this._mediasoupDevice\n  //           .rtpCapabilities\n  //           .codecs\n  //           .find((c) => c.kind === 'video');\n\n  //         let encodings;\n\n  //         if (firstVideoCodec.mimeType.toLowerCase() === 'video/vp9')\n  //           encodings = VIDEO_KSVC_ENCODINGS;\n  //         else if ('simulcastEncodings' in window.config)\n  //           encodings = window.config.simulcastEncodings;\n  //         else\n  //           encodings = VIDEO_SIMULCAST_ENCODINGS;\n\n  //         this._webcamProducer = await this._sendTransport.produce(\n  //           {\n  //             track,\n  //             encodings,\n  //             codecOptions:\n  //             {\n  //               videoGoogleStartBitrate: 1000\n  //             },\n  //             appData:\n  //             {\n  //               source: 'webcam'\n  //             }\n  //           });\n  //       }\n  //       else {\n  //         this._webcamProducer = await this._sendTransport.produce({\n  //           track,\n  //           appData:\n  //           {\n  //             source: 'webcam'\n  //           }\n  //         });\n  //       }\n\n  //       store.dispatch(producerActions.addProducer(\n  //         {\n  //           id: this._webcamProducer.id,\n  //           source: 'webcam',\n  //           paused: this._webcamProducer.paused,\n  //           track: this._webcamProducer.track,\n  //           rtpParameters: this._webcamProducer.rtpParameters,\n  //           codec: this._webcamProducer.rtpParameters.codecs[0].mimeType.split('/')[1]\n  //         }));\n\n  //       this._webcamProducer.on('transportclose', () => {\n  //         this._webcamProducer = null;\n  //       });\n\n  //       this._webcamProducer.on('trackended', () => {\n  //         store.dispatch(requestActions.notify(\n  //           {\n  //             type: 'error',\n  //             text: intl.formatMessage({\n  //               id: 'devices.cameraDisconnected',\n  //               defaultMessage: 'Camera disconnected'\n  //             })\n  //           }));\n\n  //         this.disableWebcam();\n  //       });\n  //     }\n  //     else if (this._webcamProducer) {\n  //       ({ track } = this._webcamProducer);\n\n  //       await track.applyConstraints(\n  //         {\n  //           ...VIDEO_CONSTRAINS[resolution],\n  //           frameRate\n  //         }\n  //       );\n\n  //       // Also change resolution of extra video producers\n  //       for (const producer of this._extraVideoProducers.values()) {\n  //         ({ track } = producer);\n\n  //         await track.applyConstraints(\n  //           {\n  //             ...VIDEO_CONSTRAINS[resolution],\n  //             frameRate\n  //           }\n  //         );\n  //       }\n  //     }\n\n  //     await this._updateWebcams();\n  //   }\n  //   catch (error) {\n  //     logger.error('updateWebcam() [error:\"%o\"]', error);\n\n  //     store.dispatch(requestActions.notify(\n  //       {\n  //         type: 'error',\n  //         text: intl.formatMessage({\n  //           id: 'devices.cameraError',\n  //           defaultMessage: 'An error occurred while accessing your camera'\n  //         })\n  //       }));\n\n  //     if (track)\n  //       track.stop();\n  //   }\n\n  //   store.dispatch(\n  //     meActions.setWebcamInProgress(false));\n  // }\n\n  // async closeMeeting() {\n  //   logger.debug('closeMeeting()');\n\n  //   store.dispatch(\n  //     roomActions.setCloseMeetingInProgress(true));\n\n  //   try {\n  //     await this.sendRequest('moderator:closeMeeting');\n  //   }\n  //   catch (error) {\n  //     logger.error('closeMeeting() [error:\"%o\"]', error);\n  //   }\n\n  //   store.dispatch(\n  //     roomActions.setCloseMeetingInProgress(false));\n  // }\n\n  // // type: mic/webcam/screen\n  // // mute: true/false\n  // async modifyPeerConsumer(peerId, type, mute) {\n  //   logger.debug(\n  //     'modifyPeerConsumer() [peerId:\"%s\", type:\"%s\"]',\n  //     peerId,\n  //     type\n  //   );\n\n  //   if (type === 'mic')\n  //     store.dispatch(\n  //       peerActions.setPeerAudioInProgress(peerId, true));\n  //   else if (type === 'webcam')\n  //     store.dispatch(\n  //       peerActions.setPeerVideoInProgress(peerId, true));\n  //   else if (type === 'screen')\n  //     store.dispatch(\n  //       peerActions.setPeerScreenInProgress(peerId, true));\n\n  //   try {\n  //     for (const consumer of this._consumers.values()) {\n  //       if (consumer.appData.peerId === peerId && consumer.appData.source === type) {\n  //         if (mute)\n  //           await this._pauseConsumer(consumer);\n  //         else\n  //           await this._resumeConsumer(consumer);\n  //       }\n  //     }\n  //   }\n  //   catch (error) {\n  //     logger.error('modifyPeerConsumer() [error:\"%o\"]', error);\n  //   }\n\n  //   if (type === 'mic')\n  //     store.dispatch(\n  //       peerActions.setPeerAudioInProgress(peerId, false));\n  //   else if (type === 'webcam')\n  //     store.dispatch(\n  //       peerActions.setPeerVideoInProgress(peerId, false));\n  //   else if (type === 'screen')\n  //     store.dispatch(\n  //       peerActions.setPeerScreenInProgress(peerId, false));\n  // }\n\n  // async _pauseConsumer(consumer) {\n  //   logger.debug('_pauseConsumer() [consumer:\"%o\"]', consumer);\n\n  //   if (consumer.paused || consumer.closed)\n  //     return;\n\n  //   try {\n  //     await this.sendRequest('pauseConsumer', { consumerId: consumer.id });\n\n  //     consumer.pause();\n\n  //     store.dispatch(\n  //       consumerActions.setConsumerPaused(consumer.id, 'local'));\n  //   }\n  //   catch (error) {\n  //     logger.error('_pauseConsumer() [error:\"%o\"]', error);\n  //   }\n  // }\n\n  // async _resumeConsumer(consumer) {\n  //   logger.debug('_resumeConsumer() [consumer:\"%o\"]', consumer);\n\n  //   if (!consumer.paused || consumer.closed)\n  //     return;\n\n  //   try {\n  //     await this.sendRequest('resumeConsumer', { consumerId: consumer.id });\n\n  //     consumer.resume();\n\n  //     store.dispatch(\n  //       consumerActions.setConsumerResumed(consumer.id, 'local'));\n  //   }\n  //   catch (error) {\n  //     logger.error('_resumeConsumer() [error:\"%o\"]', error);\n  //   }\n  // }\n\n  // async setMaxSendingSpatialLayer(spatialLayer) {\n  //   logger.debug('setMaxSendingSpatialLayer() [spatialLayer:\"%s\"]', spatialLayer);\n\n  //   try {\n  //     if (this._webcamProducer)\n  //       await this._webcamProducer.setMaxSpatialLayer(spatialLayer);\n  //     if (this._screenSharingProducer)\n  //       await this._screenSharingProducer.setMaxSpatialLayer(spatialLayer);\n  //   }\n  //   catch (error) {\n  //     logger.error('setMaxSendingSpatialLayer() [error:\"%o\"]', error);\n  //   }\n  // }\n\n  // async setConsumerPreferredLayers(consumerId, spatialLayer, temporalLayer) {\n  //   logger.debug(\n  //     'setConsumerPreferredLayers() [consumerId:\"%s\", spatialLayer:\"%s\", temporalLayer:\"%s\"]',\n  //     consumerId, spatialLayer, temporalLayer);\n\n  //   try {\n  //     await this.sendRequest(\n  //       'setConsumerPreferedLayers', { consumerId, spatialLayer, temporalLayer });\n\n  //     store.dispatch(consumerActions.setConsumerPreferredLayers(\n  //       consumerId, spatialLayer, temporalLayer));\n  //   }\n  //   catch (error) {\n  //     logger.error('setConsumerPreferredLayers() [error:\"%o\"]', error);\n  //   }\n  // }\n\n  // async setConsumerPriority(consumerId, priority) {\n  //   logger.debug(\n  //     'setConsumerPriority() [consumerId:\"%s\", priority:%d]',\n  //     consumerId, priority);\n\n  //   try {\n  //     await this.sendRequest('setConsumerPriority', { consumerId, priority });\n\n  //     store.dispatch(consumerActions.setConsumerPriority(consumerId, priority));\n  //   }\n  //   catch (error) {\n  //     logger.error('setConsumerPriority() [error:\"%o\"]', error);\n  //   }\n  // }\n\n  // async requestConsumerKeyFrame(consumerId) {\n  //   logger.debug('requestConsumerKeyFrame() [consumerId:\"%s\"]', consumerId);\n\n  //   try {\n  //     await this.sendRequest('requestConsumerKeyFrame', { consumerId });\n  //   }\n  //   catch (error) {\n  //     logger.error('requestConsumerKeyFrame() [error:\"%o\"]', error);\n  //   }\n  // }\n\n\n\n\n  async join({ roomId, joinVideo, joinAudio }) {\n\n\n    this._roomId = roomId;\n\n\n    // initialize signaling socket\n    // listen to socket events\n\n    // on room ready join room _joinRoom\n\n    // this._mediasoupDevice = new mediasoupClient.Device();\n\n    // const routerRtpCapabilities =\n    //   await this.sendRequest('getRouterRtpCapabilities');\n\n    // routerRtpCapabilities.headerExtensions = routerRtpCapabilities.headerExtensions\n    //   .filter((ext) => ext.uri !== 'urn:3gpp:video-orientation');\n\n    // await this._mediasoupDevice.load({ routerRtpCapabilities });\n\n    // create send transport createWebRtcTransport this.signalingService.sendCreateTransport\n    // listen to transport events\n\n    // create receive transport this.signalingService.sendCreateTranspor\n    // listen to transport events\n\n    // send join request\n\n    // add peers to peers service\n\n    // produce updateWebcam updateMic\n  }\n\n\n}\n"],"names":["Injectable","i0.ɵɵelementStart","i0.ɵɵtext","i0.ɵɵelementEnd","Component","LogService","LoggerModule","NgxLoggerLevel","NgModule"],"mappings":"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"}