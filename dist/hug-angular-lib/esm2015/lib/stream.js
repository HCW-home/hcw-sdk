import { Subject } from 'rxjs';
export class Stream {
    constructor() {
        this.onLayerChange = new Subject();
        this.mediaStream = new MediaStream();
    }
    setConsumer(consumer) {
        this.consumer = consumer;
        this.streamId = consumer.id;
        this.kind = consumer.kind;
        this.mediaStream.addTrack(consumer.track);
    }
    consumerLayerChanged() {
        this.mediaStream = new MediaStream();
        this.mediaStream.addTrack(this.consumer.track);
        this.onLayerChange.next();
    }
    setProducer(producer) {
        this.producer = producer;
        this.mediaStream.addTrack(producer.track);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RyZWFtLmpzIiwic291cmNlUm9vdCI6Im5nOi8vaHVnLWFuZ3VsYXItbGliLyIsInNvdXJjZXMiOlsibGliL3N0cmVhbS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBUS9CLE1BQU0sT0FBTyxNQUFNO0lBQW5CO1FBT1Msa0JBQWEsR0FBaUIsSUFBSSxPQUFPLEVBQUUsQ0FBQTtRQU9sRCxnQkFBVyxHQUFnQixJQUFJLFdBQVcsRUFBRSxDQUFDO0lBb0IvQyxDQUFDO0lBbEJDLFdBQVcsQ0FBQyxRQUFrQztRQUM1QyxJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQztRQUN6QixJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQyxFQUFFLENBQUE7UUFDM0IsSUFBSSxDQUFDLElBQUksR0FBRyxRQUFRLENBQUMsSUFBSSxDQUFDO1FBQzFCLElBQUksQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUM1QyxDQUFDO0lBRUQsb0JBQW9CO1FBQ2xCLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxXQUFXLEVBQUUsQ0FBQztRQUNyQyxJQUFJLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQy9DLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxFQUFFLENBQUE7SUFDM0IsQ0FBQztJQUdELFdBQVcsQ0FBQyxRQUFRO1FBQ2xCLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFBO1FBQ3hCLElBQUksQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUM1QyxDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XG5cblxuaW1wb3J0ICogYXMgbWVkaWFzb3VwIGZyb20gJ21lZGlhc291cC1jbGllbnQnO1xuXG5pbXBvcnQgeyBQZWVyIH0gZnJvbSAnLi9wZWVyJztcblxuXG5leHBvcnQgY2xhc3MgU3RyZWFtIHtcblxuICBwdWJsaWMgY29uc3VtZXI/OiBtZWRpYXNvdXAudHlwZXMuQ29uc3VtZXI7XG4gIHB1YmxpYyBwZWVyPzogUGVlcjtcbiAgcHVibGljIHByb2R1Y2VyP1xuICBwdWJsaWMgc3RyZWFtSWQ6IHN0cmluZztcblxuICBwdWJsaWMgb25MYXllckNoYW5nZTogU3ViamVjdDxhbnk+ID0gbmV3IFN1YmplY3QoKVxuXG4gIHB1YmxpYyB0eXBlO1xuICBwdWJsaWMgcHJvZHVjZXJQYXVzZWQ6IGJvb2xlYW5cblxuICBwdWJsaWMga2luZDtcblxuICBtZWRpYVN0cmVhbTogTWVkaWFTdHJlYW0gPSBuZXcgTWVkaWFTdHJlYW0oKTtcblxuICBzZXRDb25zdW1lcihjb25zdW1lcjogbWVkaWFzb3VwLnR5cGVzLkNvbnN1bWVyKSB7XG4gICAgdGhpcy5jb25zdW1lciA9IGNvbnN1bWVyO1xuICAgIHRoaXMuc3RyZWFtSWQgPSBjb25zdW1lci5pZFxuICAgIHRoaXMua2luZCA9IGNvbnN1bWVyLmtpbmQ7XG4gICAgdGhpcy5tZWRpYVN0cmVhbS5hZGRUcmFjayhjb25zdW1lci50cmFjayk7XG4gIH1cblxuICBjb25zdW1lckxheWVyQ2hhbmdlZCgpIHtcbiAgICB0aGlzLm1lZGlhU3RyZWFtID0gbmV3IE1lZGlhU3RyZWFtKCk7XG4gICAgdGhpcy5tZWRpYVN0cmVhbS5hZGRUcmFjayh0aGlzLmNvbnN1bWVyLnRyYWNrKTtcbiAgICB0aGlzLm9uTGF5ZXJDaGFuZ2UubmV4dCgpXG4gIH1cblxuXG4gIHNldFByb2R1Y2VyKHByb2R1Y2VyKSB7XG4gICAgdGhpcy5wcm9kdWNlciA9IHByb2R1Y2VyXG4gICAgdGhpcy5tZWRpYVN0cmVhbS5hZGRUcmFjayhwcm9kdWNlci50cmFjayk7XG4gIH1cbn1cbiJdfQ==